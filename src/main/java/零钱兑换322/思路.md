这是一份为你整理的**《动态规划：零钱兑换 (Coin Change)》**核心笔记。你可以直接保存到你的算法复习文档中。

------

# 📝 算法笔记：零钱兑换 (Coin Change)

### 1. 题目核心

类型：完全背包问题变种（求最小值的版本）。

目标：给定不同面额的硬币 coins 和总金额 amount，求凑成该金额所需的最少硬币数量。

特点：每种硬币可以使用无限次。

------

### 2. 状态定义 (DP 数组的意义)

定义一个一维数组 `dp`：

- **下标 `i`**：代表当前需要凑出的目标金额。
- **值 `dp[i]`**：代表凑出金额 `i` 所需要的**最少硬币数量**。

> **举例**：`dp[5] = 3` 表示凑出金额 5 最少需要 3 枚硬币。

------

### 3. 状态转移方程 (核心公式)

对于任意金额 $i$，我们遍历每一枚硬币的面额 $c$。

如果我们选择了硬币 $c$，那么凑出金额 $i$ 的最少数量，就等于“凑出金额 $i-c$ 的最少数量”加上“这一枚硬币”。

我们对所有硬币方案取最小值：

$$dp[i] = \min_{c \in \text{coins}} (dp[i - c]) + 1$$

**约束条件**：

1. $i - c \geq 0$ （当前金额必须大于等于硬币面额，否则放不下）。
2. $dp[i - c]$ 必须是有效的（即之前能凑出来，不能是无穷大）。

------

### 4. 初始化 (Base Case & 难点)

这是本题最容易出错的地方，分为两部分：

1. **起点初始化**：
   - `dp[0] = 0`
   - **解释**：凑出金额 0 不需要任何硬币。这是推导后续状态的基石。
2. **默认值初始化（处理“凑不出”的情况）**：
   - `dp[1...amount] = amount + 1`
   - **解释**：因为我们在方程中求的是 `min()`，初始值必须设为一个**“极大值”**，否则会被 0 覆盖。
   - **为什么是 `amount + 1`？** 即使全是 1 元硬币，数量最多也是 `amount`。只要大于 `amount`，就等同于数学上的 $+\infty$（无穷大）。

------

### 5. 代码模板 (Python)

Python

```
def coinChange(coins: list[int], amount: int) -> int:
    # 1. 初始化 DP 数组
    # 大小为 amount + 1，默认值为 amount + 1 (代表无穷大)
    dp = [amount + 1] * (amount + 1)
    
    # 2. Base Case
    dp[0] = 0
    
    # 3. 遍历每一个金额 (从 1 到 amount)
    for i in range(1, amount + 1):
        # 4. 遍历每一枚硬币
        for coin in coins:
            # 如果当前硬币面额小于等于当前金额，尝试使用它
            if i >= coin:
                # 核心转移方程：尝试更新 dp[i] 为更小的值
                dp[i] = min(dp[i], dp[i - coin] + 1)
    
    # 5. 返回结果
    # 如果 dp[amount] 仍然是初始值，说明无法凑出，返回 -1
    return dp[amount] if dp[amount] != amount + 1 else -1
```

------

### 6. 复杂度分析

- **时间复杂度**：$O(S \cdot n)$
  - $S$ 是金额 (`amount`)，$n$ 是硬币面额数 (`len(coins)`)。我们需要算出 $S$ 个状态，每个状态需要遍历 $n$ 枚硬币。
- **空间复杂度**：$O(S)$
  - 我们需要一个长度为 $S+1$ 的 `dp` 数组。

------

### 7. 思维导图 (记忆口诀)

1. **问最少** $\rightarrow$ 初始化为**最大** (`amount + 1`)。
2. **问可行** $\rightarrow$ `dp[0] = 0` 是起点。
3. **状态转移** $\rightarrow$ 现在的钱 = 以前的钱 (`i - coin`) + 1 个硬币。
4. **最后检查** $\rightarrow$ 如果还是最大值，说明没戏 (`return -1`)。